<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title data-i18n="optionsTitle">Gemini Mail Review Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <h1 data-i18n="optionsTitle">Gemini Mail Review Settings</h1>
    
    <div class="settings-section">
      <h2 data-i18n="apiConfigurationHeading">API Configuration</h2>
      <p class="description">
        <span data-i18n="apiConfigurationDescription">To use this add-on, you need a Gemini API key. Get one for free at</span>
        <a href="https://makersuite.google.com/app/apikey" target="_blank" data-i18n="googleAIStudio">Google AI Studio</a>.
      </p>
      
      <div class="form-group">
        <label for="api-key" data-i18n="apiKeyLabel">Gemini API Key:</label>
        <input type="password" id="api-key" data-i18n-placeholder="apiKeyPlaceholder" placeholder="Enter your API key" />
        <button id="toggle-visibility" class="small-button" data-i18n="showButton">Show</button>
      </div>
      
      <div class="form-group">
        <label for="api-endpoint" data-i18n="apiEndpointLabel">API Endpoint:</label>
        <input type="text" id="api-endpoint" data-i18n-placeholder="apiEndpointPlaceholder" placeholder="API endpoint URL" />
      </div>
      
      <div class="form-group form-group-column">
        <label data-i18n="customPromptLabel">Custom Prompt Templates:</label>
        <p class="description" data-i18n="customPromptDescription">
          You can save 3 types of custom prompt templates. When reviewing emails, you can select and edit the template.
        </p>
        
        <div class="template-group">
          <label for="custom-prompt-name-1" data-i18n="customPromptTemplateName1Label">Template 1 Name:</label>
          <input type="text" id="custom-prompt-name-1" data-i18n-placeholder="customPromptTemplateNamePlaceholder" placeholder="Template name (optional)" />
          <label for="custom-prompt-1" data-i18n="customPromptTemplate1Label">Template 1:</label>
          <textarea id="custom-prompt-1" rows="4" data-i18n-placeholder="customPromptPlaceholder" placeholder="Optional: Enter additional instructions for Gemini AI"></textarea>
        </div>
        
        <div class="template-group">
          <label for="custom-prompt-name-2" data-i18n="customPromptTemplateName2Label">Template 2 Name:</label>
          <input type="text" id="custom-prompt-name-2" data-i18n-placeholder="customPromptTemplateNamePlaceholder" placeholder="Template name (optional)" />
          <label for="custom-prompt-2" data-i18n="customPromptTemplate2Label">Template 2:</label>
          <textarea id="custom-prompt-2" rows="4" data-i18n-placeholder="customPromptPlaceholder" placeholder="Optional: Enter additional instructions for Gemini AI"></textarea>
        </div>
        
        <div class="template-group">
          <label for="custom-prompt-name-3" data-i18n="customPromptTemplateName3Label">Template 3 Name:</label>
          <input type="text" id="custom-prompt-name-3" data-i18n-placeholder="customPromptTemplateNamePlaceholder" placeholder="Template name (optional)" />
          <label for="custom-prompt-3" data-i18n="customPromptTemplate3Label">Template 3:</label>
          <textarea id="custom-prompt-3" rows="4" data-i18n-placeholder="customPromptPlaceholder" placeholder="Optional: Enter additional instructions for Gemini AI"></textarea>
        </div>
      </div>
      
      <div class="form-group">
        <label for="cache-retention-days" data-i18n="cacheRetentionLabel">Cache Retention Days:</label>
        <input type="number" id="cache-retention-days" min="1" max="365" value="7" data-i18n-placeholder="cacheRetentionPlaceholder" placeholder="7" />
        <p class="description" data-i18n="cacheRetentionDescription">
          Number of days to retain cached analysis results. Default is 7 days.
        </p>
      </div>
      
      <div class="form-group">
        <label data-i18n="cacheManagementLabel">Cache Management:</label>
        <p class="description" data-i18n="cacheManagementDescription">
          Cached data includes email content and analysis results. Clear cache to remove all stored email data.
        </p>
        <button id="clear-cache" class="button" data-i18n="clearCacheButton">Clear All Cached Data</button>
      </div>
      
      <div id="status" class="status"></div>
      
      <div class="button-group">
        <button id="save" class="button button-primary" data-i18n="saveButton">Save Settings</button>
        <button id="test" class="button" data-i18n="testButton">Test Connection</button>
      </div>
    </div>
    
    <div class="settings-section">
      <h2 data-i18n="aboutHeading">About</h2>
      <p data-i18n="aboutDescription1">
        This add-on uses Google's Gemini AI to review your emails before sending. 
        It checks for spelling, grammar, tone, clarity, and potential issues.
      </p>
      <p>
        <strong data-i18n="privacyLabel">Privacy:</strong> <span data-i18n="aboutDescription2">Your emails are sent to Google's Gemini API for analysis. 
        Please review Google's privacy policy before using this add-on.</span>
      </p>
      <p>
        <strong data-i18n="securityLabel">Security:</strong> <span data-i18n="aboutDescription3">
        Your API key and email cache are stored locally in Thunderbird's storage. 
        The cache includes email subjects, recipients, and body content. 
        For sensitive emails, consider disabling cache or clearing it regularly using the cache management option above.</span>
      </p>
    </div>
  </div>
  <script src="options.js"></script>
</body>
</html>
